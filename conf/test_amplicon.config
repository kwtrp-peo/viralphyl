/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for running minimal tests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines input files and everything required to run a fast and simple pipeline test.

    Use as follows:
        nextflow run nf-core/viralphyl -profile test,<docker/singularity> --outdir <OUTDIR>
        nextflow run main.nf -profile docker,local,test_amplicon --fastq_dir data --outdir Results --metadata_tsv metadata.tsv
        nextflow run main.nf -profile docker,local,test_amplicon --outdir Results

    For ARM-based machines (e.g., Apple M1, M2, M3)
        nextflow run main.nf -profile arm,docker,local,test_amplicon --outdir Results
        
----------------------------------------------------------------------------------------
*/

process {
    resourceLimits = [
        cpus: 7,
        memory: '14.GB',
        time: '4.h'
    ]

    executor = 'local'  // Runs jobs on the local machine instead of a cluster.
    maxForks = 4  // Allows up to 4 tasks (samples) to run in parallel.
    cpus = 2  // Each task is assigned 2 CPU by default.
    memory = '3GB'  // Each task is allocated 3GB of RAM.
    time = '2h'  // Each task has a maximum runtime of 2 hours.
}

params {
    pathogen                    = "hMPV"
    min_sequence_length         = 700
    fastq_dir                   = "${projectDir}/test_data/run1_test"
    metadata_tsv                = "${projectDir}/test_data/test_metadata.tsv"
    multi_ref_file              = "${projectDir}/primerschemes/msa_refs/hmpv_genotypes_refs_align.fasta"
    ref_fasta                   = "${projectDir}/primerschemes/hmpv/V1.3.0/hmpv.reference.fasta"
    ref_bed                     = "${projectDir}/primerschemes/hmpv/V1.3.0/hmpv.scheme.bed"
}