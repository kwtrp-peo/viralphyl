/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for running minimal tests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines input files and everything required to run a fast and simple pipeline test.

    Use as follows:
        nextflow run nf-core/viralphyl -profile test,<docker/singularity> --outdir <OUTDIR>
        nextflow run main.nf -profile docker,arm,local -c ravig.config

----------------------------------------------------------------------------------------
*/

process {
    resourceLimits = [
        cpus: 9,
        memory: '14.5GB',
        time: '4.h'
    ]

    executor = 'local'  // Runs jobs on the local machine instead of a cluster.
    maxForks = 3  // Allows up to 4 tasks (samples) to run in parallel.
    cpus = 3  // Each task is assigned 4 CPU by default.
    memory = '4.7GB'  // Each task is allocated 4GB of RAM.
    time = '2h'  // Each task has a maximum runtime of 2 hours.
}

params {
    protocol                    = 'metagenomics'
    fastq_dir                   = "~/Data"
    outdir                      = "~/Metagenomics_results"
    target_pathogen             = "~/Ref/pathogen_names.txt"

    // Reduce human genome for pipeline testing
    human_genome                = "~/Refs/hg38_indexed.mmi"
    kraken2_db                  = "~/Refs/k2_viral_20250402"

    // custome mash database made from the .fna.gz
    // mash_db                     = "https://ftp.ncbi.nlm.nih.gov/refseq/release/viral/viral.1.1.genomic.fna.gz"
    // classifier                  = 'mash'

    // kraken2 workflow
    classifier                      = 'kraken2'
}
